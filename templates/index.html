<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>AI íšŒì˜ë¡ ìš”ì•½ê¸°</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; max-width: 800px; margin: 40px auto; padding: 20px; background-color: #f4f7f6; }
        .card { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h2 { color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px; }
        .btn { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
        .result-area { margin-top: 30px; display: none; }
        .box { background: #f9f9f9; border: 1px solid #ddd; padding: 15px; border-radius: 8px; white-space: pre-wrap; margin-bottom: 20px; }
        #loading { display: none; color: #007bff; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="card">
        <h2>ğŸ™ï¸ AI íšŒì˜ë¡ ìš”ì•½ ì„œë¹„ìŠ¤</h2>
        <p>ìŒì„± íŒŒì¼(wav, mp3 ë“±)ì„ ì—…ë¡œë“œí•˜ë©´ í…ìŠ¤íŠ¸ ë³€í™˜ê³¼ ìš”ì•½ì„ í•œ ë²ˆì— ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>
        <input type="file" id="audioInput" accept="audio/*">
        <button class="btn" onclick="startProcess()">ë¶„ì„ ì‹œì‘</button>
        <div id="loading">ğŸš€ AIê°€ ì—´ì‹¬íˆ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤... (1~2ë¶„ ì†Œìš”)</div>

        <div id="resultArea" class="result-area">
            <h3>âœ¨ ìš”ì•½ ê²°ê³¼</h3>
            <div id="summary" class="box"></div>
            <h3>ğŸ“ ì „ì²´ ìŠ¤í¬ë¦½íŠ¸</h3>
            <div id="script" class="box"></div>
        </div>
    </div>

    <script>
        async function startProcess() {
            const fileInput = document.getElementById('audioInput');
            if (!fileInput.files[0]) return alert("íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”!");

            const formData = new FormData();
            formData.append('audio_file', fileInput.files[0]);

            document.getElementById('loading').style.display = 'block';
            document.getElementById('resultArea').style.display = 'none';

            try {
                const response = await fetch('/process', { method: 'POST', body: formData });
                const data = await response.json();

                document.getElementById('summary').innerText = data.summary;
                document.getElementById('script').innerText = data.script;
                document.getElementById('resultArea').style.display = 'block';
            } catch (e) {
                alert("ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        }
    </script>
</body>
</html>